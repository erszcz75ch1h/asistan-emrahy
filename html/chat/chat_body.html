<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
		<meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../../css/aui/aui.css" />
		<link rel="stylesheet" type="text/css" href="../../css/iconfont/iconfont.css" />
		<style type="text/css">
			.winu-flex-box-horizontal {
				display: -webkit-box;
				display: -webkit-flex;
				display: flex;
				-webkit-box-orient: horizontal;
				-webkit-flex-flow: row;
				flex-flow: row;
				width: 100%;
			}
			.winu-flex-item {
				-webkit-box-flex: 1;
				-webkit-flex: 1;
				flex: 1;
			}
			.aui-in {
				overflow-x: hidden;
			}
			.aui-in li {
				display: -webkit-box;
				-webkit-box-orient: horizontal;
				box-sizing: border-box;
				position: relative;
				clear: both;
			}
			.aui-in li:after {
				border-bottom: 1px solid #d7d7d7;
				display: block;
				content: '';
				position: absolute;
				right: 0;
				bottom: 0;
				left: 0;
				-webkit-transform-origin: 0 0;
				-webkit-transform: scaleY(0.5);
				pointer-events: none;
			}
			.aui-user-view-cell {
				padding: 10px;
			}
			.aui-user-view-cell:after {
				border-bottom: 0;
			}
			.aui-in li > div {
				-webkit-box-align: center;
				width: 100%;
				box-sizing: border-box;
			}
			.aui-user-view:after {
				border-top: 0;
			}
			.hidden-menu {
				width: auto !important;
				position: relative;
				display: -webkit-box;
				display: -webkit-flex;
				display: flex;
				-webkit-box-orient: horizontal;
				-webkit-flex-flow: row;
				flex-flow: row;
				width: 100%;
				position: relative;
				top: -1px;
			}
			.hidden-menu p {
				display: -webkit-box;
				-webkit-box-orient: horizontal;
				-webkit-box-pack: center;
				-webkit-box-align: center;
				display: box;
				box-orient: horizontal;
				box-pack: center;
				box-align: center;
				padding: 0 20px;
				color: #fff;
				font-size: 18px;
			}
			.one {
				background: #f00;
			}
			.two {
				background: #F1C40F;
			}
			.three {
				background: #0000FF;
			}
			.aui-content {
				margin: 0 0 5px 0;
			}
			.search-area {
				padding: 10px 10px 5px 10px;
				background: #fff;
			}
			.input-row {
				border-radius: 3px;
				-webkit-border-radius: 3px;
				position: relative;
			}
			.parent-area {
				position: relative;
			}
			.input-row span {
				width: 30px;
				height: 30px;
				display: block;
				line-height: 30px;
				color: #4385f6;
				background: #f3f3f3;
				border-radius: 0 4px 4px 0;
				-webkit-border-radius: 0 4px 4px 0;
			}
			.input-row input {
				vertical-align: middle;
				border: none;
				margin: 0;
				background: #f3f3f3;
				padding: 4px 15px;
				border-radius: 4px 0 0 4px;
				-webkit-border-radius: 4px 0 0 4px;
				font-size: 13px;
			}
			.clear-both {
				clear: both;
			}
			.aui-img-body {
				position: relative;
			}
			.aui-img-body label {
				float: right;
				color: #808080;
				font-size: 12px;
			}
			.aui-user-view-cell p {
				color: #808080;
			}
			.aui-ellipsis-1 {
				padding-right: 35px;
			}
			.aui-img-body font {
				position: absolute;
				right: 0;
				bottom: 0;
				z-index: 100;
			}
		</style>
	</head>
	<body>
		<div class="search-area">
			<div class="parent-area">
				<div class="input-row winu-flex-box-horizontal">
					<input class="winu-flex-item" type="text" placeholder="请输入关键字搜索" />
					<span class="iconfont icon-sousuo"></span>
				</div>
			</div>
		</div>
		<div class="aui-content">
			<ul class="aui-user-view aui-in">
				<li tapmode >
					<div class="aui-user-view-cell aui-img drop-div" tapmode >
						<img class="aui-img-object aui-pull-left" src="../../image/pic.jpg">
						<div class="aui-img-body">
							<span>点点例</span><label>19:30</label>
							<p class='aui-ellipsis-1 clear-both'>
								修技之道，皆为点点起，积少便成多！
							</p>
							<font class="aui-badge aui-badge-info aui-pull-right">2</font>
						</div>
					</div>
					<div class="hidden-menu">
						<p class="one" tapmode >
							删除
						</p>
						<p class="two" tapmode >
							置顶
						</p>
					</div>
				</li>
				<li tapmode >
					<div class="aui-user-view-cell aui-img drop-div" tapmode >
						<img class="aui-img-object aui-pull-left" src="../../image/pic.jpg">
						<div class="aui-img-body">
							<span>点点例</span><label>19:30</label>
							<p class='aui-ellipsis-1 clear-both'>
								修技之道，皆为点点起，积少便成多！
							</p>
						</div>
					</div>
					<div class="hidden-menu">
						<p class="one" tapmode >
							删除
						</p>
						<p class="two" tapmode >
							置顶
						</p>
					</div>
				</li>
				<li tapmode >
					<div class="aui-user-view-cell aui-img drop-div" tapmode >
						<img class="aui-img-object aui-pull-left" src="../../image/pic.jpg">
						<div class="aui-img-body">
							<span>点点例</span><label>19:30</label>
							<p class='aui-ellipsis-1 clear-both'>
								中山赢友网络科技有限公司
							</p>
							<font class="aui-badge aui-badge-info aui-pull-right">9</font>
						</div>
					</div>
					<div class="hidden-menu">
						<p class="one" tapmode >
							删除
						</p>
						<p class="two" tapmode >
							置顶
						</p>
					</div>
				</li>
				<li tapmode >
					<div class="aui-user-view-cell aui-img drop-div" tapmode >
						<img class="aui-img-object aui-pull-left" src="../../image/pic.jpg">
						<div class="aui-img-body">
							<span>点点例</span><label>19:30</label>
							<p class='aui-ellipsis-1 clear-both'>
								中山赢友网络科技有限公司
							</p>
						</div>
					</div>
					<div class="hidden-menu">
						<p class="one" tapmode >
							删除
						</p>
						<p class="two" tapmode >
							置顶
						</p>
					</div>
				</li>
				<li tapmode >
					<div class="aui-user-view-cell aui-img drop-div" tapmode >
						<img class="aui-img-object aui-pull-left" src="../../image/pic.jpg">
						<div class="aui-img-body">
							<span>点点例</span><label>19:30</label>
							<p class='aui-ellipsis-1 clear-both'>
								一起改变中国IT教育！
							</p>
						</div>
					</div>
					<div class="hidden-menu">
						<p class="one" tapmode >
							删除
						</p>
						<p class="two" tapmode >
							置顶
						</p>
					</div>
				</li>
				<li tapmode >
					<div class="aui-user-view-cell aui-img drop-div" tapmode >
						<img class="aui-img-object aui-pull-left" src="../../image/pic.jpg">
						<div class="aui-img-body">
							<span>点点例</span><label>19:30</label>
							<p class='aui-ellipsis-1 clear-both'>
								中山赢友网络科技有限公司
							</p>
						</div>
					</div>
					<div class="hidden-menu">
						<p class="one" tapmode >
							删除
						</p>
						<p class="two" tapmode >
							置顶
						</p>
					</div>
				</li>
				<li tapmode >
					<div class="aui-user-view-cell aui-img drop-div" tapmode >
						<img class="aui-img-object aui-pull-left" src="../../image/pic.jpg">
						<div class="aui-img-body">
							<span>点点例</span><label>19:30</label>
							<p class='aui-ellipsis-1 clear-both'>
								修技之道，皆为点点起，积少便成多！
							</p>
						</div>
					</div>
					<div class="hidden-menu">
						<p class="one" tapmode >
							删除
						</p>
						<p class="two" tapmode >
							置顶
						</p>
					</div>
				</li>
				<li tapmode >
					<div class="aui-user-view-cell aui-img drop-div" tapmode >
						<img class="aui-img-object aui-pull-left" src="../../image/pic.jpg">
						<div class="aui-img-body">
							<span>点点例</span><label>19:30</label>
							<p class='aui-ellipsis-1 clear-both'>
								修技之道，皆为点点起，积少便成多！
							</p>
						</div>
					</div>
					<div class="hidden-menu">
						<p class="one" tapmode >
							删除
						</p>
						<p class="two" tapmode >
							置顶
						</p>
					</div>
				</li>
				<li tapmode >
					<div class="aui-user-view-cell aui-img drop-div" tapmode >
						<img class="aui-img-object aui-pull-left" src="../../image/pic.jpg">
						<div class="aui-img-body">
							<span>点点例</span><label>19:30</label>
							<p class='aui-ellipsis-1 clear-both'>
								中山赢友网络科技有限公司
							</p>
						</div>
					</div>
					<div class="hidden-menu">
						<p class="one" tapmode >
							删除
						</p>
						<p class="two" tapmode >
							置顶
						</p>
					</div>
				</li>
			</ul>
		</div>
	</body>
	<script type="text/javascript" src="../../script/AHelper.js"></script>
	<script type="text/javascript" src="../../script/zepto.min.js"></script>
	<script type="text/javascript" src="../../script/hammer.min.js"></script>
	<script type="text/javascript">
		var hammertime = null;
		var maxWidth = 0;
		var marginLeft = 0;
		function addPan(obj) {
			marginLeft = 0;
			// 获取最大的滑动值
			maxWidth = obj.siblings(".hidden-menu").width();
			hammertime = new Hammer(obj[0], {
				domEvents : true
			});
			// 开始拖动
			hammertime.on("panstart", function(e) {
				obj.css({
					"transition" : "margin-left 0s",
					"-webkit-transition" : "margin-left 0s",
				});
				marginLeft = parseInt(obj.css("margin-left"), 10);
				obj.parent().siblings().each(function() {
					$(this).children(".drop-div").css({
						"transition" : "margin-left 0.2s",
						"-webkit-transition" : "margin-left 0.2s",
						"margin-left" : "0px"
					});
				});
			});
			// 拖动过程
			hammertime.on("panmove", function(e) {
				var panRange = marginLeft + e.deltaX;
				if (panRange < 0 && panRange > -maxWidth) {
					obj.css({
						"margin-left" : panRange + "px"
					});
				}
			});
			// 拖动结束
			hammertime.on("panend", function(e) {
				marginLeft = parseInt(obj.css("margin-left"));
				if (e.deltaX < 0) {
					if (marginLeft > -30) {
						obj.css({
							"transition" : "margin-left 0.2s",
							"-webkit-transition" : "margin-left 0.2s",
							"margin-left" : "0px"
						});
					} else {
						obj.css({
							"transition" : "margin-left 0.2s",
							"-webkit-transition" : "margin-left 0.2s",
							"margin-left" : (-maxWidth) + "px"
						});
					}
				} else {
					if (marginLeft < -(maxWidth - 30)) {
						obj.css({
							"transition" : "margin-left 0.2s",
							"-webkit-transition" : "margin-left 0.2s",
							"margin-left" : (-maxWidth) + "px"
						});
					} else {
						obj.css({
							"transition" : "margin-left 0.2s",
							"-webkit-transition" : "margin-left 0.2s",
							"margin-left" : "0px"
						});
					}
				}
			});
		}

		Zepto(function($) {
			$(".aui-in li").each(function() {
				// 添加手势
				addPan($(this).children(".drop-div"));
			});
			$(".drop-div").on("tap", function() {
				$(".drop-div").css({
					"transition" : "margin-left 0.2s",
					"-webkit-transition" : "margin-left 0.2s",
					"margin-left" : "0px"
				});
			});
		});
	</script>
</html>